var gaconnector2=function(){var r,u=!0;function a(e){console.log(e);var t=new XMLHttpRequest;t.open("GET",e,!0),t.send()}function c(){var e=l("_ga"),t=window[window.GoogleAnalyticsObject];if("string"==typeof e&&0<e.length){var n=e.split(".");return n.slice(n.length-2,n.length).join(".")}if(void 0!==t&&void 0!==t.getAll){var o=t.getAll()[0];if(void 0!==o)return o.get("clientId")}}window.localStorage&&window.localStorage.setItem;function i(e){var t=e.split("/")[2],n=/[-\w]+\.(?:[-\w]+\.xn--[-\w]+|[-\w]{2,}|[-\w]+\.[-\w]{2})$/i.exec(t);if("object"==typeof n&&n instanceof Array&&0<n.length)return n[0]}function d(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&2<t.length&&"string"==typeof t[2]&&0<t[2].length?t[2]:null}function f(e,t){u?localStorage.setItem(e,t):function(e,t){console.log("setting cookie "+e);var n=new Date;n.setTime(n.getTime()+31536e6);var o="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+o+";domain=."+i(document.location.href)+";path=/"}(e,t)}function l(e){e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){for(var o=t[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}function g(e){return u&&localStorage.getItem(e)||l(e)}function m(e){console.log("deleting value "+e),u&&localStorage.getItem(e)?localStorage.removeItem(e):f(e,"")}function s(e,t){t=void 0===t?document.location.search:t;try{var n=t.match("[?&]"+e+"=([^&]+)");if(n){var o=n[1];return o=o.replace(/\+/g,"%20"),o=decodeURIComponent(o)}return""}catch(e){return""}}!function e(){void 0===c()&&setTimeout(e,500)}();var v=null;function h(e){return e}var p=[];function y(){for(var e={},t=document.cookie.split("; "),n=0;n<t.length;n++){var o=t[n].split("=")[0],r=t[n].split("=").slice(1).join("=");if(13<o.length)if("gaconnector2_"==o.substring(0,13))e[o.replace("gaconnector2_","")]=r}return e}function w(){for(var e=Object.keys(localStorage),t={},n=0;n<e.length;n++){if("gaconnector2_"===e[n].substr(0,13))t[e[n].replace("gaconnector2_","")]=localStorage.getItem(e[n])}return t}var _=["name","email","phone"],b={name:[/^name$/i,/^user.*name$/i],email:[/email/i],phone:[/phone/i]};function I(){var e=u?w():y();for(var t in _){var n=h(_[t]),o=e[n];""!==o&&void 0!==o&&(S(n,o),m("gaconnector2_"+n))}}function S(e,t){if(-1===p.indexOf(e+"="+t)&&""!==v){var n="https://track.gaconnector.com/save_identifier";n+="?gaconnector_id="+v,n+="&account_id="+r,n+="&name="+e;a(n+="&value="+encodeURIComponent(t))}}function E(e,t){var n,o,r,a;o=t,r=h(n=e),a=h(o),-1===p.indexOf(n+"="+o)&&f("gaconnector2_"+r,a),S(e,t)}var n=["color","date","datetime-local","month","number","range","search","time","url","week"];function R(){for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++)e[t].getAttribute("data-gaconnector-tracked")||-1===n.indexOf(e[t].type)&&(e[t].setAttribute("data-gaconnector-tracked",!0),e[t].onchange=function(e){var t;if(t=e.target.value,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t))E("email",e.target.value);else for(var n in b)for(var o=b[n],r=0;r<o.length;r++){var a=o[r];(a.test(e.target.name)||a.test(e.target.id))&&E(n,e.target.value)}})}function j(){return self!==top}function C(){for(var e=document.querySelectorAll("iframe"),t=0;t<e.length;t++){var n=e[t].contentWindow,o={gaconnectorId:v,accountId:r};n.postMessage(o,"*")}}function k(e){"object"==typeof e.data&&void 0!==e.data.gaconnectorId&&(v=e.data.gaconnectorId,r=e.data.accountId,f("gaconnector2_id",v))}function x(e){var t,n=e.dataset.originalHref;return void 0===n&&(e.dataset.originalHref=e.href,n=e.href),t=-1<n.indexOf("?")?"&":"?",e.href=n+t+"gaconnectorId="+v,e.href}function A(){for(var e=i(document.location.href),t=d(document.location.href),n=document.getElementsByTagName("a"),o=0;o<n.length;o++){var r=n[o],a=i(r.href),c=d(r.href);-1<U.indexOf(a)&&a!==e?x(r):u&&-1<U.indexOf(c)&&c!==t&&x(r)}}var t,o,O,T,U=null,D=(T={isReady:!(O={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"}),readyWait:1,holdReady:function(e){e?T.readyWait++:T.ready(!0)},ready:function(e){if(!0===e&&!--T.readyWait||!0!==e&&!T.isReady){if(!document.body)return setTimeout(T.ready,1);if((T.isReady=!0)!==e&&0<--T.readyWait)return;t.resolveWith(document,[T])}},bindReady:function(){if(!t){if(t=T._Deferred(),"complete"===document.readyState)return setTimeout(T.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",T.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",o),window.attachEvent("onload",T.ready);var e=!1;try{e=null==window.frameElement}catch(e){}document.documentElement.doScroll&&e&&L()}}},_Deferred:function(){var c,n,i,d=[],l={done:function(){if(!i){var e,t,n,o,r,a=arguments;for(c&&(r=c,c=0),e=0,t=a.length;e<t;e++)n=a[e],"array"===(o=T.type(n))?l.done.apply(l,n):"function"===o&&d.push(n);r&&l.resolveWith(r[0],r[1])}return this},resolveWith:function(e,t){if(!i&&!c&&!n){t=t||[],n=1;try{for(;d[0];)d.shift().apply(e,t)}finally{c=[e,t],n=0}}return this},resolve:function(){return l.resolveWith(this,arguments),this},isResolved:function(){return!(!n&&!c)},cancel:function(){return i=1,d=[],this}};return l},type:function(e){return null==e?String(e):O[Object.prototype.toString.call(e)]||"object"}},document.addEventListener?o=function(){document.removeEventListener("DOMContentLoaded",o,!1),T.ready()}:document.attachEvent&&(o=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",o),T.ready())}),function(e){T.bindReady(),T.type(e),t.done(e)});function L(){if(!T.isReady){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(L,1)}T.ready()}}return{track:function(e,t){function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var o;r=e,function(e){var t=!!window.localStorage&&!!window.localStorage.setItem,n=!!e&&"localStorage"===e.storageEngine,o=!e||"string"!=typeof e.storageEngine,r=!!e&&!!e.internalDomains&&!!e.internalDomains.length;u=t&&(n||o&&!r),gaconnector2.useLocalStorage=u;var a,c,i=y(),d=w();if(u)for(var l in i)i[l]&&!d[l]&&f("gaconnector2_"+l,i[l]),c="gaconnector2_"+l,document.cookie=c+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";else for(var l in d)d[l]&&!i[l]&&f("gaconnector2_"+l,d[l]),a="gaconnector2_"+l,localStorage.removeItem(a)}(t),(v=s("gaconnectorId")||g("gaconnectorId")||g("gaconnector2_id")||n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n())!==g("gaconnector2_id")&&f("gaconnector2_id",v),v=v,void 0!==t&&void 0!==t.iframeEnabled&&!0!==t.iframeEnabled||(j()?(console.log("Adding receiveGaConnectorId listener"),window.addEventListener("message",k,!1)):(console.log("Messaging child iframes"),C(),setInterval(C,1e3))),j()||(o="https://track.gaconnector.com/track_pageview",""!=document.location.search?(o+=document.location.search,o+="&"):o+="?",o+="gaconnector_id="+v,o+="&account_id="+r,o+="&referer="+encodeURIComponent(document.referrer),o+="&GA_Client_ID="+c(),o+="&page_url="+encodeURIComponent(window.location.href),o+="&gclid="+encodeURIComponent(s("gclid",window.location.href)),o+="&utm_campaign="+encodeURIComponent(s("utm_campaign",window.location.href)),o+="&utm_term="+encodeURIComponent(s("utm_term",window.location.href)),o+="&utm_content="+encodeURIComponent(s("utm_content",window.location.href)),o+="&utm_source="+encodeURIComponent(s("utm_source",window.location.href)),a(o+="&utm_medium="+encodeURIComponent(s("utm_medium",window.location.href)))),I(),D(function(e){R(),setInterval(R,1e3),void 0!==t&&void 0!==(U=t.internalDomains)&&(A(),setInterval(A,1e3))})},identify:E}}();